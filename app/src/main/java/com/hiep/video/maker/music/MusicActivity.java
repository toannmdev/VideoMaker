package com.hiep.video.maker.music;import android.app.Activity;import android.content.Context;import android.content.Intent;import android.database.Cursor;import android.media.MediaPlayer;import android.os.Bundle;import android.provider.MediaStore;import android.util.Log;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.AdapterView;import android.widget.AdapterView.OnItemClickListener;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.ListView;import android.widget.TextView;import com.hiep.video.maker.BaseActivity;import com.hiep.video.maker.R;import com.hiep.video.maker.entity.AudioEntity;import com.hiep.video.maker.util.Logger;import java.util.ArrayList;public class MusicActivity extends BaseActivity {    private ListView musicList;    private ArrayList<AudioEntity> listAudios;    private MusicAdapter adapter;    /**     * Called when the activity is first created.     */    @Override    public void onCreate(Bundle savedInstanceState) {        super.onCreate(savedInstanceState);        setContentView(R.layout.activity_list_audio);        initMusic();    }    private void initMusic() {        listAudios=new ArrayList<>();        String[] proj = {MediaStore.Audio.Media._ID,                MediaStore.Audio.Media.DATA,                MediaStore.Audio.Media.DISPLAY_NAME,                MediaStore.Video.Media.SIZE};        Cursor musicCursor = managedQuery(MediaStore.Audio.Media.EXTERNAL_CONTENT_URI,                proj, null, null, null);        for (int i=0;i<musicCursor.getCount();i++){            musicCursor.moveToPosition(i);            int collumPath= musicCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DATA);            int collumTitle= musicCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.DISPLAY_NAME);            int collumSize=musicCursor.getColumnIndexOrThrow(MediaStore.Audio.Media.SIZE);            AudioEntity audioEntity=new AudioEntity(musicCursor.getString(collumPath),musicCursor.getString(collumTitle),musicCursor.getString(collumSize));            listAudios.add(audioEntity);        }        musicCursor.close();        adapter=new MusicAdapter(MusicActivity.this, listAudios, myApplication, new MusicAdapter.OnAudioSelectListener() {            @Override            public void onSelectAudio(AudioEntity item) {                Logger.d("onSelectAudio ");                Intent intent=new Intent();                intent.putExtra("audio_select",item);                setResult(RESULT_OK,intent);                finish();            }        });        musicList = (ListView) findViewById(R.id.PhoneMusicList);        musicList.setAdapter(adapter);    }}